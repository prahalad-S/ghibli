<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ghibli Style AI</title>
<style>
  body { font-family: Arial, sans-serif; text-align:center; margin: 2rem; }
  img { max-width: 300px; border: 1px solid #ccc; margin: 1rem 0; }
  button { font-size: 1rem; padding: 0.5rem 1rem; }
</style>
</head>
<body>
<h1>Ghibli Style AI Image</h1>
<img id="image" src="https://i.imgur.com/W7Lr5kN.jpg" alt="Original" />
<br/>
<button id="styleBtn">Convert to Ghibli Style</button>

<script>
const image = document.getElementById("image");
const button = document.getElementById("styleBtn");

button.onclick = async () => {
  button.disabled = true;
  button.textContent = "Processing...";
  const imageUrl = image.src;

  try {
    const response = await fetch("https://ghibli-fxgy.onrender.com/api/ghibli-style", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ image_url: imageUrl }),
    });
    const data = await response.json();
    if (data.output) {
      image.src = data.output[0];
    } else {
      alert("Failed to get stylized image.");
    }
  } catch (error) {
    alert("Error: " + error.message);
  } finally {
    button.disabled = false;
    button.textContent = "Convert to Ghibli Style";
  }
};
</script>
</body>
</html>
